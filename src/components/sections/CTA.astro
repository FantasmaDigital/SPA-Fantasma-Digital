<section id="contact" class="py-32 bg-[#040406] relative overflow-hidden">
  <!-- Background Grid -->
  <div
    class="absolute inset-0 opacity-[0.03] pointer-events-none"
    style="background-image: linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px); background-size: 40px 40px;"
  >
  </div>

  <div class="w-[85%] max-w-[1800px] mx-auto relative z-10">
    <div class="grid grid-cols-1 xl:grid-cols-2 gap-20">
      <!-- Contact Info / Header -->
      <div class="space-y-12">
        <div>
          <h2
            class="text-xs font-bold tracking-[0.3em] uppercase text-[#ffcc33] mb-6 reveal-fade-up"
          >
            Iniciar un Proyecto
          </h2>
          <h3
            class="text-5xl xl:text-6xl font-bold leading-[0.95] tracking-tight text-white mb-6 reveal-fade-up delay-100"
          >
            INGENIANDO <br />
            TU PR√ìXIMO <br />
            <span class="text-[#25c4ff]">GRAN SALTO.</span>
          </h3>
          <p
            class="text-[#c8d2dc] text-lg font-light max-w-md reveal-fade-up delay-150"
          >
            Cu√©ntanos tus desaf√≠os. Nosotros dise√±aremos la soluci√≥n. Desde
            plataformas de alta escala hasta ecosistemas digitales a medida.
          </p>
        </div>

        <div
          class="space-y-8 border-t border-white/10 pt-12 reveal-fade-up delay-200"
        >
          <div class="flex items-start gap-6 group">
            <div
              class="w-12 h-12 flex items-center justify-center bg-white/5 border border-white/10 text-[#ffcc33] text-xl group-hover:bg-[#ffcc33] group-hover:text-black transition-colors duration-300"
            >
              <i class="fa-solid fa-envelope"></i>
            </div>
            <div>
              <h4
                class="text-white font-bold uppercase tracking-wide text-sm mb-1"
              >
                Escr√≠benos
              </h4>
              <a
                href="mailto:hello@fantasma.digital"
                class="text-[#889096] hover:text-white transition-colors"
                >hello@fantasma.digital</a
              >
            </div>
          </div>

          <div class="flex items-start gap-6 group">
            <div
              class="w-12 h-12 flex items-center justify-center bg-white/5 border border-white/10 text-[#25c4ff] text-xl group-hover:bg-[#25c4ff] group-hover:text-black transition-colors duration-300"
            >
              <i class="fa-solid fa-location-dot"></i>
            </div>
            <div>
              <h4
                class="text-white font-bold uppercase tracking-wide text-sm mb-1"
              >
                Oficinas Centrales
              </h4>
              <p class="text-[#889096]">San Salvador, El Salvador</p>
            </div>
          </div>

          <!-- Socials Network Apartado -->
          <div class="pt-8 w-full border-t border-white/10 mt-8">
            <h4
              class="text-xs font-bold uppercase tracking-widest text-[#555] mb-6"
            >
              Conecta con Nosotros
            </h4>
            <div class="flex gap-4">
              <a
                href="#"
                class="w-14 h-14 flex items-center justify-center bg-[#0a0f16] border border-white/10 hover:border-[#0077b5] text-gray-400 hover:text-white transition-all duration-300 group"
              >
                <i
                  class="fa-brands fa-linkedin-in text-xl group-hover:scale-110 transition-transform"
                ></i>
              </a>
              <a
                href="#"
                class="w-14 h-14 flex items-center justify-center bg-[#0a0f16] border border-white/10 hover:border-white text-gray-400 hover:text-white transition-all duration-300 group"
              >
                <i
                  class="fa-brands fa-x-twitter text-xl group-hover:scale-110 transition-transform"
                ></i>
              </a>
              <a
                href="#"
                class="w-14 h-14 flex items-center justify-center bg-[#0a0f16] border border-white/10 hover:border-[#333] text-gray-400 hover:text-white transition-all duration-300 group"
              >
                <i
                  class="fa-brands fa-github text-xl group-hover:scale-110 transition-transform"
                ></i>
              </a>
              <a
                href="#"
                class="w-14 h-14 flex items-center justify-center bg-[#0a0f16] border border-white/10 hover:border-[#ff0000] text-gray-400 hover:text-white transition-all duration-300 group"
              >
                <i
                  class="fa-brands fa-youtube text-xl group-hover:scale-110 transition-transform"
                ></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Section -->
      <div
        class="bg-white/[0.02] h-max border border-white/5 p-8 xl:p-12 reveal-scale-up delay-300 backdrop-blur-sm"
      >
        <form id="projectForm" class="space-y-8">
          <!-- Name and Email Row -->
          <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
            <div class="space-y-2">
              <label
                for="name"
                class="text-xs font-bold uppercase tracking-widest text-[#555]"
                >Nombre *</label
              >
              <input
                type="text"
                id="name"
                name="name"
                required
                class="w-full bg-transparent border-b border-white/10 py-3 text-white focus:outline-none focus:border-[#ffcc33] transition-colors rounded-none placeholder-white/20"
                placeholder="Juan P√©rez"
              />
            </div>
            <div class="space-y-2">
              <label
                for="email"
                class="text-xs font-bold uppercase tracking-widest text-[#555]"
                >Correo Electr√≥nico *</label
              >
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full bg-transparent border-b border-white/10 py-3 text-white focus:outline-none focus:border-[#ffcc33] transition-colors rounded-none placeholder-white/20"
                placeholder="juan@empresa.com"
              />
            </div>
          </div>

          <!-- Company and Phone Row -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="space-y-2">
              <label
                for="company"
                class="text-xs font-bold uppercase tracking-widest text-[#555]"
                >Empresa *</label
              >
              <input
                type="text"
                id="company"
                name="company"
                required
                class="w-full bg-transparent border-b border-white/10 py-3 text-white focus:outline-none focus:border-[#ffcc33] transition-colors rounded-none placeholder-white/20"
                placeholder="Tu Empresa S.A. de C.V."
              />
            </div>
            <div class="space-y-2">
              <label
                for="phone"
                class="text-xs font-bold uppercase tracking-widest text-[#555]"
                >Tel√©fono (Opcional)</label
              >
              <input
                type="tel"
                id="phone"
                name="phone"
                class="w-full bg-transparent border-b border-white/10 py-3 text-white focus:outline-none focus:border-[#ffcc33] transition-colors rounded-none placeholder-white/20"
                placeholder="+1 (555) 000-0000"
              />
            </div>
          </div>

          <!-- Service Selection - Animated Dropdown -->
          <div class="space-y-4">
            <label
              for="service"
              class="text-xs font-bold uppercase tracking-widest text-[#555]"
              >Servicio Requerido *</label
            >
            <div class="relative">
              <button
                type="button"
                id="serviceDropdownBtn"
                class="w-full bg-white/[0.03] border border-white/10 py-4 px-6 text-left text-white hover:border-white/30 focus:outline-none focus:border-[#ffcc33] transition-all duration-300 flex items-center justify-between group"
              >
                <span
                  id="selectedService"
                  class="text-gray-400 group-hover:text-white transition-colors"
                  >Selecciona un servicio...</span
                >
                <i
                  class="fa-solid fa-chevron-down text-[#ffcc33] transition-transform duration-300"
                  id="dropdownIcon"></i>
              </button>

              <div
                id="serviceDropdown"
                class="absolute top-full left-0 w-full mt-2 bg-[#0a0f16] border border-white/10 backdrop-blur-xl opacity-0 invisible translate-y-[-10px] transition-all duration-300 z-50 max-h-[400px] overflow-hidden"
              >
                <div class="p-3 border-b border-white/10">
                  <input
                    type="text"
                    placeholder="Buscar servicios..."
                    class="w-full bg-white/[0.03] border border-white/10 py-2 px-4 text-white text-sm focus:outline-none focus:border-[#ffcc33] transition-colors rounded-none placeholder-white/30"
                  />
                </div>
                <div class="max-h-[300px] overflow-y-auto custom-scrollbar">
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="seguridad-para-tu-negocio"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üõ°Ô∏è</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Seguridad para tu Negocio
                        </div>
                        <div class="text-xs text-gray-500">
                          Blindaje y protecci√≥n digital
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="diseno-que-enamora-ux-ui"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üé®</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Dise√±o que Enamora (UX/UI)
                        </div>
                        <div class="text-xs text-gray-500">
                          Interfaces elegantes e incre√≠bles
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="tu-sitio-web-profesional"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üåê</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Tu Sitio Web Profesional
                        </div>
                        <div class="text-xs text-gray-500">
                          P√°ginas modernas y escalables
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="mantenimiento-y-soporte"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üõ†Ô∏è</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Mantenimiento y Soporte
                        </div>
                        <div class="text-xs text-gray-500">
                          Cuidado y soporte continuo
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="tu-propia-app-movil-y-pc"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üì±</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Tu Propia App (M√≥vil y PC)
                        </div>
                        <div class="text-xs text-gray-500">
                          Apps para celulares y escritorio
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="automatiza-tu-trabajo"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">ü§ñ</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Automatiza tu Trabajo
                        </div>
                        <div class="text-xs text-gray-500">
                          Ahorra tiempo con automatizaciones
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="analisis-y-crecimiento"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üìà</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          An√°lisis y Crecimiento
                        </div>
                        <div class="text-xs text-gray-500">
                          Reportes claros y √∫tiles
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="asesoria-en-tecnologia"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üí°</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Asesor√≠a en Tecnolog√≠a
                        </div>
                        <div class="text-xs text-gray-500">
                          Estrategia para tu √©xito digital
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="service-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 group"
                    data-value="contenido-para-tus-redes"
                  >
                    <div class="flex items-center gap-3">
                      <div class="text-2xl">üì∏</div>
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Contenido para tus Redes
                        </div>
                        <div class="text-xs text-gray-500">
                          Dise√±o impacto para tus redes
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <input type="hidden" id="serviceValue" name="service" required />
            </div>
          </div>

          <!-- Budget Range - Dropdown -->
          <div class="space-y-4">
            <label
              for="budget"
              class="text-xs font-bold uppercase tracking-widest text-[#555]"
              >Rango de Presupuesto *</label
            >
            <div class="relative">
              <button
                type="button"
                id="budgetDropdownBtn"
                class="w-full bg-white/[0.03] border border-white/10 py-4 px-6 text-left text-white hover:border-white/30 focus:outline-none focus:border-[#25c4ff] transition-all duration-300 flex items-center justify-between group"
              >
                <span
                  id="selectedBudget"
                  class="text-gray-400 group-hover:text-white transition-colors"
                  >Selecciona un rango...</span
                >
                <i
                  class="fa-solid fa-chevron-down text-[#25c4ff] transition-transform duration-300"
                  id="budgetDropdownIcon"></i>
              </button>

              <div
                id="budgetDropdown"
                class="absolute top-full left-0 w-full mt-2 bg-[#0a0f16] border border-white/10 backdrop-blur-xl opacity-0 invisible translate-y-[-10px] transition-all duration-300 z-50 overflow-hidden"
              >
                <div class="max-h-[250px] overflow-y-auto custom-scrollbar">
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="less-than-1k"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        &lt; $1K
                      </div>
                      <div class="text-xs text-gray-500">
                        Proyectos Iniciales
                      </div>
                    </div>
                  </div>
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="1k-5k"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        $1K - $5K
                      </div>
                      <div class="text-xs text-gray-500">Micro-proyectos</div>
                    </div>
                  </div>
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="5k-10k"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        $5K - $10K
                      </div>
                      <div class="text-xs text-gray-500">Peque√±a Empresa</div>
                    </div>
                  </div>
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="10k-25k"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        $10K - $25K
                      </div>
                      <div class="text-xs text-gray-500">
                        Proyectos Est√°ndar
                      </div>
                    </div>
                  </div>
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="25k-50k"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        $25K - $50K
                      </div>
                      <div class="text-xs text-gray-500">
                        Proyectos Medianos
                      </div>
                    </div>
                  </div>
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="50k-100k"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        $50K - $100K
                      </div>
                      <div class="text-xs text-gray-500">
                        Escala Empresarial
                      </div>
                    </div>
                  </div>
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="100k+"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        $100K+
                      </div>
                      <div class="text-xs text-gray-500">Gran Empresa</div>
                    </div>
                  </div>
                  <div
                    class="budget-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 group"
                    data-value="custom"
                  >
                    <div class="flex items-center justify-between">
                      <div
                        class="text-white font-semibold group-hover:text-[#25c4ff] transition-colors"
                      >
                        Presupuesto Personalizado
                      </div>
                      <div class="text-xs text-gray-500">Hablemos</div>
                    </div>
                  </div>
                </div>
              </div>
              <input type="hidden" id="budgetValue" name="budget" required />
            </div>

            <!-- Custom Budget Input (Hidden by default) -->
            <div id="customBudgetContainer" class="hidden animate-fade-in">
              <div class="space-y-2">
                <label
                  for="customBudget"
                  class="text-[10px] font-bold uppercase tracking-widest text-[#25c4ff] mb-2 block"
                  >Especifica tu presupuesto (USD) *</label
                >
                <div class="relative">
                  <span class="absolute left-0 top-3 text-[#555] font-bold"
                    >$</span
                  >
                  <input
                    type="number"
                    id="customBudget"
                    name="custom_budget_amount"
                    class="w-full bg-transparent border-b border-white/10 py-3 pl-4 text-white focus:outline-none focus:border-[#25c4ff] transition-colors rounded-none placeholder-white/20"
                    placeholder="2500"
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- Timeline - Dropdown -->
          <div class="space-y-4">
            <label
              for="timeline"
              class="text-xs font-bold uppercase tracking-widest text-[#555]"
              >Tiempo Estimado *</label
            >
            <div class="relative">
              <button
                type="button"
                id="timelineDropdownBtn"
                class="w-full bg-white/[0.03] border border-white/10 py-4 px-6 text-left text-white hover:border-white/30 focus:outline-none focus:border-[#ffcc33] transition-all duration-300 flex items-center justify-between group"
              >
                <span
                  id="selectedTimeline"
                  class="text-gray-400 group-hover:text-white transition-colors"
                  >Selecciona tiempo...</span
                >
                <i
                  class="fa-solid fa-chevron-down text-[#ffcc33] transition-transform duration-300"
                  id="timelineDropdownIcon"></i>
              </button>

              <div
                id="timelineDropdown"
                class="absolute top-full left-0 w-full mt-2 bg-[#0a0f16] border border-white/10 backdrop-blur-xl opacity-0 invisible translate-y-[-10px] transition-all duration-300 z-50 overflow-hidden"
              >
                <div class="max-h-[200px] overflow-y-auto custom-scrollbar">
                  <div
                    class="timeline-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="urgent"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Urgente - 1 Mes
                        </div>
                        <div class="text-xs text-gray-500 mt-1">
                          Entrega Prioritaria
                        </div>
                      </div>
                      <div class="text-2xl">üöÄ</div>
                    </div>
                  </div>
                  <div
                    class="timeline-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="short"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Corto - 2-3 Meses
                        </div>
                        <div class="text-xs text-gray-500 mt-1">
                          Entrega R√°pida
                        </div>
                      </div>
                      <div class="text-2xl">‚ö°</div>
                    </div>
                  </div>
                  <div
                    class="timeline-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 border-b border-white/5 group"
                    data-value="medium"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Medio - 3-6 Meses
                        </div>
                        <div class="text-xs text-gray-500 mt-1">
                          Tiempo Est√°ndar
                        </div>
                      </div>
                      <div class="text-2xl">üìÖ</div>
                    </div>
                  </div>
                  <div
                    class="timeline-option p-4 hover:bg-white/[0.05] cursor-pointer transition-all duration-200 group"
                    data-value="long"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <div
                          class="text-white font-semibold group-hover:text-[#ffcc33] transition-colors"
                        >
                          Largo - 6+ Meses
                        </div>
                        <div class="text-xs text-gray-500 mt-1">
                          Proyectos Complejos
                        </div>
                      </div>
                      <div class="text-2xl">üèóÔ∏è</div>
                    </div>
                  </div>
                </div>
              </div>
              <input
                type="hidden"
                id="timelineValue"
                name="timeline"
                required
              />
            </div>
          </div>

          <!-- Project Details -->
          <div class="space-y-2">
            <label
              for="details"
              class="text-xs font-bold uppercase tracking-widest text-[#555]"
              >Detalles del Proyecto *</label
            >
            <textarea
              id="details"
              name="details"
              rows="4"
              required
              class="w-full bg-transparent border-b border-white/10 py-3 text-white focus:outline-none focus:border-[#ffcc33] transition-colors rounded-none placeholder-white/20 resize-none"
              placeholder="Cu√©ntanos sobre tus objetivos, desaf√≠os y qu√© buscas lograr..."
            ></textarea>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="w-full py-5 bg-[#ffcc33] hover:bg-white text-black font-bold uppercase tracking-widest transition-all duration-300 flex items-center justify-center gap-3 group relative overflow-hidden"
          >
            <div
              class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"
            >
            </div>
            <span class="relative z-10">Iniciar Solicitud</span>
            <i
              class="relative z-10 fa-solid fa-arrow-right transform group-hover:translate-x-1 transition-transform"
            ></i>
          </button>
        </form>
      </div>
    </div>
  </div>
</section>

<style>
  /* Custom Scrollbar for Dropdown */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 204, 51, 0.5);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 204, 51, 0.8);
  }

  /* Dropdown Open State */
  .dropdown-open {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
  }

  /* Rotate Icon */
  .icon-rotate {
    transform: rotate(180deg);
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .hidden {
    display: none;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const dropdownBtn = document.getElementById("serviceDropdownBtn");
    const dropdown = document.getElementById("serviceDropdown");
    const dropdownIcon = document.getElementById("dropdownIcon");
    const selectedServiceSpan = document.getElementById("selectedService");
    const serviceValueInput = document.getElementById(
      "serviceValue"
    ) as HTMLInputElement;
    const serviceSearch = document.getElementById(
      "serviceSearch"
    ) as HTMLInputElement;
    const serviceOptions = document.querySelectorAll(".service-option");
    const form = document.getElementById("projectForm") as HTMLFormElement;

    // Budget dropdown elements
    const budgetDropdownBtn = document.getElementById("budgetDropdownBtn");
    const budgetDropdown = document.getElementById("budgetDropdown");
    const budgetDropdownIcon = document.getElementById("budgetDropdownIcon");
    const selectedBudgetSpan = document.getElementById("selectedBudget");
    const budgetValueInput = document.getElementById(
      "budgetValue"
    ) as HTMLInputElement;
    const budgetOptions = document.querySelectorAll(".budget-option");

    // Timeline dropdown elements
    const timelineDropdownBtn = document.getElementById("timelineDropdownBtn");
    const timelineDropdown = document.getElementById("timelineDropdown");
    const timelineDropdownIcon = document.getElementById(
      "timelineDropdownIcon"
    );
    const selectedTimelineSpan = document.getElementById("selectedTimeline");
    const timelineValueInput = document.getElementById(
      "timelineValue"
    ) as HTMLInputElement;
    const timelineOptions = document.querySelectorAll(".timeline-option");

    let isOpen = false;
    let isBudgetOpen = false;
    let isTimelineOpen = false;

    // Toggle dropdown (Service)
    dropdownBtn?.addEventListener("click", (e) => {
      e.stopPropagation();
      isOpen = !isOpen;

      // Close others
      isBudgetOpen = false;
      isTimelineOpen = false;
      budgetDropdown?.classList.remove("dropdown-open");
      budgetDropdownIcon?.classList.remove("icon-rotate");
      timelineDropdown?.classList.remove("dropdown-open");
      timelineDropdownIcon?.classList.remove("icon-rotate");

      if (isOpen) {
        dropdown?.classList.add("dropdown-open");
        dropdownIcon?.classList.add("icon-rotate");
        // Focus search input when opening
        setTimeout(() => serviceSearch?.focus(), 100);
      } else {
        dropdown?.classList.remove("dropdown-open");
        dropdownIcon?.classList.remove("icon-rotate");
      }
    });

    // Toggle Budget dropdown
    budgetDropdownBtn?.addEventListener("click", (e) => {
      e.stopPropagation();
      isBudgetOpen = !isBudgetOpen;

      // Close others
      isOpen = false;
      isTimelineOpen = false;
      dropdown?.classList.remove("dropdown-open");
      dropdownIcon?.classList.remove("icon-rotate");
      timelineDropdown?.classList.remove("dropdown-open");
      timelineDropdownIcon?.classList.remove("icon-rotate");

      if (isBudgetOpen) {
        budgetDropdown?.classList.add("dropdown-open");
        budgetDropdownIcon?.classList.add("icon-rotate");
      } else {
        budgetDropdown?.classList.remove("dropdown-open");
        budgetDropdownIcon?.classList.remove("icon-rotate");
      }
    });

    // Toggle Timeline dropdown
    timelineDropdownBtn?.addEventListener("click", (e) => {
      e.stopPropagation();
      isTimelineOpen = !isTimelineOpen;

      // Close others
      isOpen = false;
      isBudgetOpen = false;
      dropdown?.classList.remove("dropdown-open");
      dropdownIcon?.classList.remove("icon-rotate");
      budgetDropdown?.classList.remove("dropdown-open");
      budgetDropdownIcon?.classList.remove("icon-rotate");

      if (isTimelineOpen) {
        timelineDropdown?.classList.add("dropdown-open");
        timelineDropdownIcon?.classList.add("icon-rotate");
      } else {
        timelineDropdown?.classList.remove("dropdown-open");
        timelineDropdownIcon?.classList.remove("icon-rotate");
      }
    });

    // Close dropdowns when clicking outside
    document.addEventListener("click", (e) => {
      const target = e.target as Node;

      if (isOpen && !dropdown?.contains(target) && target !== dropdownBtn) {
        dropdown?.classList.remove("dropdown-open");
        dropdownIcon?.classList.remove("icon-rotate");
        isOpen = false;
      }

      if (
        isBudgetOpen &&
        !budgetDropdown?.contains(target) &&
        target !== budgetDropdownBtn
      ) {
        budgetDropdown?.classList.remove("dropdown-open");
        budgetDropdownIcon?.classList.remove("icon-rotate");
        isBudgetOpen = false;
      }

      if (
        isTimelineOpen &&
        !timelineDropdown?.contains(target) &&
        target !== timelineDropdownBtn
      ) {
        timelineDropdown?.classList.remove("dropdown-open");
        timelineDropdownIcon?.classList.remove("icon-rotate");
        isTimelineOpen = false;
      }
    });

    // Service option selection
    serviceOptions.forEach((option) => {
      option.addEventListener("click", () => {
        const value = option.getAttribute("data-value");
        const titleElement = option.querySelector(".text-white.font-semibold");
        const title = titleElement?.textContent || "";

        if (selectedServiceSpan && serviceValueInput) {
          selectedServiceSpan.textContent = title;
          selectedServiceSpan.classList.remove("text-gray-400");
          selectedServiceSpan.classList.add("text-white");
          serviceValueInput.value = value || "";
        }

        // Close dropdown
        dropdown?.classList.remove("dropdown-open");
        dropdownIcon?.classList.remove("icon-rotate");
        isOpen = false;

        // Clear search
        if (serviceSearch) serviceSearch.value = "";
        filterServices("");
      });
    });

    // Budget option selection
    const customBudgetContainer = document.getElementById(
      "customBudgetContainer"
    );
    const customBudgetInput = document.getElementById(
      "customBudget"
    ) as HTMLInputElement;

    budgetOptions.forEach((option) => {
      option.addEventListener("click", () => {
        const value = option.getAttribute("data-value");
        const titleElement = option.querySelector(".text-white.font-semibold");
        const title = titleElement?.textContent || "";

        if (selectedBudgetSpan && budgetValueInput) {
          selectedBudgetSpan.textContent = title;
          selectedBudgetSpan.classList.remove("text-gray-400");
          selectedBudgetSpan.classList.add("text-white");
          budgetValueInput.value = value || "";
        }

        // Show/Hide custom budget input
        if (value === "custom") {
          customBudgetContainer?.classList.remove("hidden");
          customBudgetInput?.setAttribute("required", "true");
          setTimeout(() => customBudgetInput?.focus(), 300);
        } else {
          customBudgetContainer?.classList.add("hidden");
          customBudgetInput?.removeAttribute("required");
          if (customBudgetInput) customBudgetInput.value = "";
        }

        // Close dropdown
        budgetDropdown?.classList.remove("dropdown-open");
        budgetDropdownIcon?.classList.remove("icon-rotate");
        isBudgetOpen = false;
      });
    });

    // Timeline option selection
    timelineOptions.forEach((option) => {
      option.addEventListener("click", () => {
        const value = option.getAttribute("data-value");
        const titleElement = option.querySelector(".text-white.font-semibold");
        const title = titleElement?.textContent || "";

        if (selectedTimelineSpan && timelineValueInput) {
          selectedTimelineSpan.textContent = title;
          selectedTimelineSpan.classList.remove("text-gray-400");
          selectedTimelineSpan.classList.add("text-white");
          timelineValueInput.value = value || "";
        }

        // Close dropdown
        timelineDropdown?.classList.remove("dropdown-open");
        timelineDropdownIcon?.classList.remove("icon-rotate");
        isTimelineOpen = false;
      });
    });

    // Search functionality
    serviceSearch?.addEventListener("input", (e) => {
      const searchTerm = (e.target as HTMLInputElement).value.toLowerCase();
      filterServices(searchTerm);
    });

    function filterServices(searchTerm: string) {
      serviceOptions.forEach((option) => {
        const titleElement = option.querySelector(".text-white.font-semibold");
        const descElement = option.querySelector(".text-xs.text-gray-500");
        const title = titleElement?.textContent?.toLowerCase() || "";
        const desc = descElement?.textContent?.toLowerCase() || "";

        if (title.includes(searchTerm) || desc.includes(searchTerm)) {
          (option as HTMLElement).style.display = "block";
        } else {
          (option as HTMLElement).style.display = "none";
        }
      });
    }

    // Form submission handler
    form?.addEventListener("submit", (e) => {
      e.preventDefault();

      // Get form data
      const formData = new FormData(form);
      const data: Record<string, any> = {};

      formData.forEach((value, key) => {
        data[key] = value;
      });

      console.log("Form Data:", data);

      // TODO: Send to backend API
      // For now, just show success message
      alert(
        "¬°Gracias! Hemos recibido tu solicitud. Nos pondremos en contacto contigo pronto."
      );

      // Reset form
      form.reset();
      if (selectedServiceSpan) {
        selectedServiceSpan.textContent = "Selecciona un servicio...";
        selectedServiceSpan.classList.add("text-gray-400");
        selectedServiceSpan.classList.remove("text-white");
      }
      if (serviceValueInput) serviceValueInput.value = "";
    });

    // Pre-select service from URL parameter (for CTA links from service cards)
    const checkServicePreselection = () => {
      const urlParams = new URLSearchParams(window.location.search);
      let preselectedService = urlParams.get("service");

      // Handle parameters after the hash (e.g., #contact?service=...)
      if (!preselectedService && window.location.hash.includes("?")) {
        const hashParams = new URLSearchParams(
          window.location.hash.split("?")[1]
        );
        preselectedService = hashParams.get("service");
      }

      if (preselectedService) {
        const matchingOption = Array.from(serviceOptions).find(
          (opt) => opt.getAttribute("data-value") === preselectedService
        );

        if (matchingOption) {
          matchingOption.dispatchEvent(new Event("click"));

          // Scroll to contact section
          setTimeout(() => {
            document.getElementById("contact")?.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }, 100);
        }
      }
    };

    // Run on load and on hash change
    checkServicePreselection();
    window.addEventListener("hashchange", checkServicePreselection);
  });
</script>
