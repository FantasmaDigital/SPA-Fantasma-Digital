---
const brandCards = [
    {
        name: "AWS",
        tagline: "Cloud Computing",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M12 34.4l-6.7-4 3.3-9.8 6.7 4-3.3 9.8zM12.9 16l-6.7 4-2.2-9.4 7-3.1 1.9 8.5zM23.9 12.5l-3.1-7 8.5-1.9 3.1 7-8.5 1.9zM34.4 12l4-6.7 9.8 3.3-4 6.7-9.8-3.3zM48 12.9l-4-6.7 9.4-2.2 3.1 7-8.5 1.9zM59.5 23.9l7-3.1 1.9 8.5-7 3.1-1.9-8.5zM64 34.4l6.7-4-3.3-9.8-6.7 4 3.3 9.8zM63.1 48l6.7-4 2.2 9.4-7 3.1-1.9-8.5zM52.1 51.5l3.1 7-8.5 1.9-3.1-7 8.5-1.9zM41.6 52l-4 6.7-9.8-3.3 4-6.7 9.8 3.3zM28 51.1l4 6.7-9.4 2.2-3.1-7 8.5-1.9zM16.5 40.1l-7 3.1-1.9-8.5 7-3.1 1.9 8.5z"/>
            </svg>`,
    },
    {
        name: "OpenAI",
        tagline: "AI Research",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M32 12c-11.05 0-20 8.95-20 20s8.95 20 20 20 20-8.95 20-20-8.95-20-20-20zm0 36c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16z"/>
                <path d="M32 20c-6.63 0-12 5.37-12 12s5.37 12 12 12 12-5.37 12-12-5.37-12-12-12zm0 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                <circle cx="32" cy="32" r="4"/>
            </svg>`,
    },
    {
        name: "Microsoft Azure",
        tagline: "Cloud Platform",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M48 12 16 36l8 8 32-24-8-8z"/>
                <path d="M16 36l8 8-8 8 16 12 16-12-8-8 8-8L32 24 16 36z"/>
                <path d="M24 52l8 8 8-8-8-8-8 8z"/>
            </svg>`,
    },
    {
        name: "Google Cloud",
        tagline: "Data & AI",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M46 38.5a14 14 0 0 1-14 14 14 14 0 0 1-14-14c0-3.1 1-6 2.8-8.4l7.2 4.2a7 7 0 1 0 8-11.5l7.2-4.2A14 14 0 0 1 46 38.5z"/>
                <path d="M31 20.6a7 7 0 0 1 3.5.9l7.2-4.2a14 14 0 0 0-24.7 7.5l7.2 4.2a7 7 0 0 1 6.8-8.4z"/>
                <path d="M17 31.2a7 7 0 0 1 0 7.6l-7.2 4.2a14 14 0 0 0 0-16l7.2 4.2z"/>
                <path d="M46 38.5a14 14 0 0 1-5.2 10.8l-7.2-4.2a7 7 0 0 0 5.2-11.9l7.2-4.2A14 14 0 0 1 46 38.5z"/>
            </svg>`,
    },
    {
        name: "CrowdStrike",
        tagline: "Cybersecurity",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M32 12c-11.05 0-20 8.95-20 20s8.95 20 20 20 20-8.95 20-20-8.95-20-20-20zm0 36c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16z"/>
                <path d="M32 20c-6.63 0-12 5.37-12 12s5.37 12 12 12 12-5.37 12-12-5.37-12-12-12zm0 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                <path d="M32 28c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/>
            </svg>`,
    },
    {
        name: "Oracle",
        tagline: "Enterprise Cloud",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <rect x="12" y="20" width="40" height="24" rx="4" ry="4" fill="none" stroke="currentColor" stroke-width="3"/>
                <rect x="16" y="24" width="32" height="16" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="3"/>
                <circle cx="32" cy="32" r="6"/>
            </svg>`,
    },
    {
        name: "Vercel",
        tagline: "Edge Platform",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M32 8l26 46H6L32 8z"/>
            </svg>`,
    },
    {
        name: "GitHub",
        tagline: "Code Platform",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M32 8a24 24 0 0 0-7.6 46.8c1.2.2 1.6-.5 1.6-1.2v-4.8c-6.7 1.5-8.1-2.8-8.1-2.8-1.1-2.8-2.7-3.5-2.7-3.5-2.2-1.5.2-1.5.2-1.5 2.4.2 3.7 2.5 3.7 2.5 2.2 3.7 5.7 2.7 7.1 2 .2-1.6.9-2.7 1.6-3.3-5.5-.6-11.3-2.7-11.3-12.2 0-2.7 1-4.9 2.5-6.6-.3-.6-1.1-3.1.2-6.5 0 0 2.1-.7 6.8 2.5 2-.6 4.1-.9 6.2-.9 2.1 0 4.2.3 6.2.9 4.7-3.2 6.8-2.5 6.8-2.5 1.3 3.4.5 5.9.2 6.5 1.5 1.7 2.5 3.9 2.5 6.6 0 9.5-5.8 11.6-11.3 12.2.9.8 1.7 2.3 1.7 4.7v6.8c0 .7.4 1.4 1.6 1.2A24 24 0 0 0 32 8z"/>
            </svg>`,
    },
    {
        name: "Docker",
        tagline: "Container Platform",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M20 24h8v8h-8v-8zm12 0h8v8h-8v-8zm-12 12h8v8h-8v-8zm12 0h8v8h-8v-8zm12-12h8v8h-8v-8z"/>
                <path d="M44 24h-4v8h4v-8z"/>
                <path d="M24 36h8v8h-8v-8z"/>
                <path d="M8 32c0 13.3 10.7 24 24 24s24-10.7 24-24S45.3 8 32 8 8 18.7 8 32Z"/>
            </svg>`,
    },
    {
        name: "Cloudflare",
        tagline: "Web Security",
        icon: `<svg viewBox="0 0 64 64" class="w-7 h-7">
                <path d="M32 8l24 16-24 16L8 24 32 8z"/>
                <path d="M32 24l8 8-8 8-8-8 8-8z"/>
                <circle cx="32" cy="32" r="8"/>
            </svg>`,
    },
];
---

<section class="w-full bg-[#040406] text-white pb-14">
    <div class="w-full mx-auto flex flex-row gap-6">
        <div class="flex flex-row sm:items-center gap-3">
            <div class="flex pl-10 flex-col items-start gap-3">
                <div class="h-[2px] w-12 bg-white"></div>
                <span class="uppercase tracking-[0.25em] text-xs text-white/80"
                    >Junto a los mejores</span
                >
            </div>
        </div>

        <div
            id="brandMarqueeContainer"
            class="relative w-full overflow-hidden rounded border border-white/10 bg-white/[0.03] backdrop-blur"
        >
            <div
                class="absolute inset-y-0 left-0 w-24 bg-gradient-to-r from-[#040406] via-[#040406]/70 to-transparent pointer-events-none"
            ></div>
            <div
                class="absolute inset-y-0 right-0 w-24 bg-gradient-to-l from-[#040406] via-[#040406]/70 to-transparent pointer-events-none"
            ></div>

            <div
                id="brandMarquee"
                class="flex gap-4 py-5 pl-6 animate-marquee"
                aria-hidden="true"
            >
                {
                    brandCards.concat(brandCards).map((brand, index) => (
                        <div
                            class="brand-card flex-shrink-0 flex items-center gap-3 min-w-[220px] px-5 py-3 rounded-xl border border-white/10 bg-white/5 shadow-[0_15px_45px_rgba(0,0,0,0.35)] backdrop-blur-md"
                        >
                            <div
                                class="brand-icon w-12 h-12 rounded-2xl flex items-center justify-center border border-white/15 shadow-[0_10px_30px_rgba(0,0,0,0.35)]"
                                style="background: linear-gradient(135deg, #2a2a2a, #0f0f0f); box-shadow: 0 12px 32px rgba(0,0,0,0.35);"
                            >
                                <span class="block" set:html={brand.icon} />
                            </div>
                            <div class="flex flex-col">
                                <span class="text-white font-semibold leading-tight">
                                    {brand.name}
                                </span>
                                <span class="text-xs uppercase tracking-[0.2em] text-white/60">
                                    {brand.tagline}
                                </span>
                            </div>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<style>
    .animate-marquee {
        min-width: max-content;
        animation: marquee 45s linear infinite;
        will-change: transform;
    }

    .marquee-paused {
        animation-play-state: paused;
    }

    .brand-card {
        transition: transform 0.35s ease, filter 0.35s ease, opacity 0.35s ease,
            box-shadow 0.35s ease;
        color: #f5f5f5;
    }

    .brand-card.is-focused {
        transform: translateY(-4px) scale(1.04);
        filter: none;
        opacity: 1;
        box-shadow: 0 12px 40px rgba(255, 255, 255, 0.08);
    }

    .brand-card.is-dimmed {
        filter: blur(3px) saturate(0.6);
        opacity: 0.35;
    }

    .brand-card.is-pulled {
        transform: translateX(-14px) translateY(-2px) scale(0.9) rotate(-6deg);
        filter: blur(4px) saturate(0.7);
        opacity: 0.4;
        transition-duration: 0.4s;
        transition-timing-function: cubic-bezier(0.55, 0.01, 0.32, 1);
    }

    .brand-card svg,
    .brand-card svg * {
        fill: currentColor !important;
        stroke: currentColor !important;
    }

    @keyframes marquee {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(-50%);
        }
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const marquee = document.getElementById("brandMarquee");
        const cards = Array.from(
            document.querySelectorAll<HTMLElement>(".brand-card"),
        );

        // --- MARQUEE INTERACTION: hover to "freeze time" ---
        if (marquee && cards.length) {
            const clearFocus = () => {
                marquee.classList.remove("marquee-paused");
                cards.forEach((card) => {
                    card.classList.remove("is-focused", "is-dimmed");
                });
            };

            cards.forEach((card) => {
                card.addEventListener("mouseenter", () => {
                    marquee.classList.add("marquee-paused");
                    cards.forEach((item) => {
                        if (item === card) {
                            item.classList.add("is-focused");
                            item.classList.remove("is-dimmed");
                        } else {
                            item.classList.add("is-dimmed");
                            item.classList.remove("is-focused");
                        }
                    });
                });

                card.addEventListener("mouseleave", clearFocus);
            });
        }

        // --- LATERAL PULL: near left bar we simulate a suction ---
        if (marquee && cards.length) {
            const PULL_THRESHOLD = 85; // px from the left edge

            const tick = () => {
                const marqueeRect = marquee.getBoundingClientRect();

                cards.forEach((card) => {
                    const rect = card.getBoundingClientRect();
                    const distanceToLeft = rect.right - marqueeRect.left;

                    if (distanceToLeft < PULL_THRESHOLD) {
                        card.classList.add("is-pulled");
                    } else {
                        card.classList.remove("is-pulled");
                    }
                });

                requestAnimationFrame(tick);
            };

            requestAnimationFrame(tick);
        }
    });
</script>
